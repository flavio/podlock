<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Concepts :: PodLock</title>
    <meta name="generator" content="Antora 3.1.14">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">PodLock</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/flavio/podlock" target="_blank" rel="noopener noreferrer"
          title="View Source on GitHub">
          <span class="icon">
            <svg style="width:24px;height:24px" viewBox="0 0 16 16" fill="currentColor">
              <path
                d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
            </svg>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="podlock-docs" data-version="next">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="index.html">PodLock</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Home</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="quickstart.html">Quickstart Guide</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture.html">Architecture Overview</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="concepts.html">Key Concepts</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="uninstall.html">Uninstall Guide</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">PodLock</span>
    <span class="version">next</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../v0.0.1/index.html">PodLock</a></div>
      <ul class="versions">
        <li class="version is-current">
          <a href="index.html">next</a>
        </li>
        <li class="version is-latest">
          <a href="../v0.0.1/index.html">v0.0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../v0.0.1/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">PodLock</a></li>
    <li><a href="concepts.html">Key Concepts</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">next</button>
  <div class="version-menu">
    <a class="version is-current" href="concepts.html">next</a>
    <a class="version is-missing" href="../v0.0.1/index.html">v0.0.1</a>
  </div>
</div>
<div class="edit-this-page"><a href="https://github.com/flavio/podlock/edit/main/docs/next/modules/ROOT/pages/concepts.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
  <h1 class="page">Concepts</h1>

  <div class="admonitionblock warning">
    <table>
      <tbody>
        <tr>
          <td class="icon">
            <i class="fa icon-warning" title="Warning"></i>
          </td>
          <td class="content">
            This is unreleased documentation for PodLock Next ðŸš§ version.
            Features here may not be released yet.
            <br>
            For up-to-date documentation, see the
            <a href="../v0.0.1/index.html">latest stable version</a>
            (v0.0.1).
          </td>
        </tr>
      </tbody>
    </table>
  </div>


  <div class="sect1">
<h2 id="_profile_binding_to_pods"><a class="anchor" href="#_profile_binding_to_pods"></a>Profile Binding to Pods</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Profiles cannot be applied to already running Pods. The restrictions are applied
when the container process is started, so Pods must be created after the profile
is defined and the label is set.</p>
</div>
<div class="paragraph">
<p>Moreover, removing or changing the <code>podlock.kubewarden.io/profile</code> label on a running
Pod cannot be done.</p>
</div>
<div class="paragraph">
<p>This is enforced by a <a href="https://kubernetes.io/docs/reference/access-authn-authz/validating-admission-policy/">Validating Admission Policy</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_container_implications"><a class="anchor" href="#_container_implications"></a>Container Implications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a LandlockProfile is applied to a Pod:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Containers listed in the profile</strong>: Only the containers explicitly specified in the <code>spec.profilesByContainer</code> section of the LandlockProfile will have Landlock restrictions applied. The binaries listed for each container will be intercepted and restricted according to the profile.</p>
</li>
<li>
<p><strong>Containers not listed in the profile</strong>: Containers in the Pod that are not mentioned in the profile will run with no Landlock restrictions applied. This allows you to selectively apply profiles to specific containers within a multi-container Pod.</p>
</li>
<li>
<p><strong>Binaries not listed in the profile</strong>: Within a container that has a profile, any binary not explicitly listed in the profile will run with no restrictions. However, if an unrestricted binary is invoked by a restricted binary, it will inherit the restrictions of the invoking binary.</p>
</li>
<li>
<p><strong>Other pods in the cluster</strong>: Applying a profile to one Pod has no effect on other Pods or Pods running in other namespaces. Each Pod&#8217;s restrictions are isolated and independent.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_profile_lifecycle_and_deletion_safety"><a class="anchor" href="#_profile_lifecycle_and_deletion_safety"></a>Profile Lifecycle and Deletion Safety</h2>
<div class="sectionbody">
<div class="paragraph">
<p>LandlockProfile resources are protected by a finalizer that prevents accidental deletion while they are in use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>In-use profiles</strong>: If a LandlockProfile is referenced by a running Pod (via the <code>podlock.kubewarden.io/profile</code> label), attempting to delete the profile will not immediately remove it. Instead, the profile will enter a "deletion pending" state with a <code>DeletionTimestamp</code> set.</p>
</li>
<li>
<p><strong>Finalizer protection</strong>: The profile&#8217;s finalizer will remain in place until all Pods referencing the profile have been deleted.</p>
</li>
<li>
<p><strong>Automatic cleanup</strong>: Once all Pods that reference the profile are deleted, the finalizer is removed and the profile is garbage collected.</p>
</li>
<li>
<p><strong>Unreferenced profile deletion</strong>: Profiles that are not referenced by any Pods can be deleted immediately without waiting for finalizer cleanup.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This safety mechanism ensures that security policies cannot be accidentally removed while they are actively protecting running containers.</p>
</div>
</div>
</div>
  </article>  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
